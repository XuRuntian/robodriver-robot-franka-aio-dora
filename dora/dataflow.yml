nodes:
  - id: camera_0
    path: ../dora/nodes/dora_any_ros1.py
    inputs:
      tick: dora/timer/millis/33  # 30 FPS
    outputs:
      - data_out  # 统一输出端口名，或者你也可以在env里定制
    env:
      # ROS 配置
      ROS_TOPIC: "/camera/color/image_raw"
      MSG_TYPE: "sensor_msgs/Image"
      # 数据处理配置
      DATA_TYPE: "IMAGE"       # 告诉脚本这是一个图像，需要特殊处理
      ENCODING: "rgb8"         # 目标编码
      OUTPUT_NAME: "data_out"  # 对应上面的 outputs

  - id: camera_1
    path: ../dora/nodes/dora_any_ros1.py
    inputs:
      tick: dora/timer/millis/33  # 30 FPS
    outputs:
      - data_out  # 统一输出端口名，或者你也可以在env里定制
    env:
      # ROS 配置
      ROS_TOPIC: "/camera_1/color/image_raw"
      MSG_TYPE: "sensor_msgs/Image"
      # 数据处理配置
      DATA_TYPE: "IMAGE"       # 告诉脚本这是一个图像，需要特殊处理
      ENCODING: "rgb8"         # 目标编码
      OUTPUT_NAME: "data_out"  # 对应上面的 outputs

  - id: camera_2
    path: ../dora/nodes/dora_any_ros1.py
    inputs:
      tick: dora/timer/millis/33  # 30 FPS
    outputs:
      - data_out  # 统一输出端口名，或者你也可以在env里定制
    env:
      # ROS 配置
      ROS_TOPIC: "/camera_2/color/image_raw"
      MSG_TYPE: "sensor_msgs/Image"
      # 数据处理配置
      DATA_TYPE: "IMAGE"       # 告诉脚本这是一个图像，需要特殊处理
      ENCODING: "rgb8"         # 目标编码
      OUTPUT_NAME: "data_out"  # 对应上面的 outputs

  - id: gripper
    path: ../dora/nodes/dora_any_ros1.py
    inputs:
      tick: dora/timer/millis/33
    outputs:
      - encoder_val
    env:
      # ROS 配置
      ROS_TOPIC: "/encoder"
      MSG_TYPE: "std_msgs/Float32"

      # 提取配置
      DATA_TYPE: "ATTRIBUTE"   # 这是一个属性，不是图像
      EXTRACT_PATH: "data"     # <--- 关键：rostopic echo 看到的字段名
      OUTPUT_NAME: "encoder_val"
  # - id: camera_wrist_fish
  #   path: nodes/dora_camera_opencv.py
  #   inputs:
  #     tick: dora/timer/millis/33
  #   outputs:
  #     - image
  #   env:
  #     CAPTURE_PATH: "/dev/video81"
  #     IMAGE_WIDTH: 640
  #     IMAGE_HEIGHT: 480
  - id: arm_franka_aio
    path: nodes/dora-arm-franka/dora_arm_franka/main.py
    build: pip install -e nodes/dora-arm-franka
    inputs:
      get_joint: dora/timer/millis/33
      action_joint: franka_aio_dora/action_joint
      gripper: gripper/encoder_val
    outputs:
      - jointstate
    env:
      url: http://127.0.0.1:5000/

  - id: arm_pika
    path: nodes/dora_pika.py
    inputs:
      get_joint: dora/timer/millis/33
    outputs:
      - jointstate
    env:
      url: http://127.0.0.1:5000/


  - id: franka_aio_dora
    path: dynamic
    inputs:
      image_wrist_0: camera_0/data_out
      image_wrist_1: camera_1/data_out
      image_wrist_2: camera_2/data_out
      leader_arm_joint: arm_pika/jointstate
      follower_arm_joint: arm_franka_aio/jointstate
    outputs:
      - action_joint



